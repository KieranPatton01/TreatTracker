<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Log In â€¢ Treat Tracker</title>
    <link rel="stylesheet" href="./css/main.css">
    <link rel="stylesheet" href="./css/login.css">
</head>
<body class="login-body">
    <div class="login-container">
        <div id="bitmoji-container" class="snap-logo-box">
            <span id="placeholder-icon" style="font-size: 60px;">ðŸŒ¹</span>
        </div>
        <div class="login-card">
            <h1>Log In</h1>
            <div class="input-group">
                <label>NAME</label>
                <input type="text" id="nameInput" autocomplete="off" placeholder="Enter name">
            </div>
            <div class="input-group">
                <label>PASSWORD</label>
                <input type="password" id="passInput" autocomplete="off" placeholder="Password">
            </div>
            <button id="unlockBtn">Log In</button>
        </div>
    </div>
    <script type="module">
        import { handleLogin } from './js/auth.js';
        const nameInput = document.getElementById('nameInput');
        const bitmojiDiv = document.getElementById('bitmoji-container');
        const userAvatars = {
            "kieran": "10226724-246135883_7-s5-v1",
            "libby": "37237988-100513394046_2416-s5-v1",
            "isla": "37237988-139859680_123-s5-v1"
        };
        nameInput.addEventListener('input', (e) => {
            const name = e.target.value.toLowerCase().trim();
            if (userAvatars[name]) {
                const portraitUrl = `https://cf-st.sc-cdn.net/3d/render/${userAvatars[name]}.webp?trim=circle&scale=0&ua=2`;
                bitmojiDiv.innerHTML = `<img src="${portraitUrl}" style="width:100px; height:100px; border-radius:50%;">`;
            } else {
                bitmojiDiv.innerHTML = `<span style="font-size: 60px;">ðŸŒ¹</span>`;
            }
        });
        document.getElementById('unlockBtn').onclick = handleLogin;
    </script>
</body>
</html>